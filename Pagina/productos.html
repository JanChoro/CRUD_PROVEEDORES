<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="assets/css/style.css">
    <title>Inicio</title>
</head>

<body>
    <main class="d-flex">
        <div class="d-flex flex-column navbar-dark bg-primary bg-gradient min-vh-100 " style="width: 250px">
            <a href="inicio.html" class="navbar-brand  fs-2 text-white text-center p-5 brand">Oriental Soft</a>
            <ul class="navbar-nav p-4 text-center">
                <li class="nav-item mt-1"><a href="productos.html"
                        class="nav-link text-white fw-bold fs-5">Productos</a></li>
                <hr class="border border-light w-75 m-auto">
                <li class="nav-item mt-5"><a href="inicio.html" class="nav-link text-white">Inicio</a>
                </li>
                <li class="nav-item mt-5"><a href="administradores.html" class="nav-link text-white">Administradores</a>
                </li>
                <li class="nav-item mt-5"><a href="proveedores.html" class="nav-link text-white">Proveedores</a></li>
            </ul>
            <hr class="border border-light w-75 m-auto">
            <a href="index.html" class="nav-link text-white text-center p-5"><i class="bi bi-box-arrow-left"></i> Cerrar
                Sesión</a>
        </div>
        <div class="container d-flex justify-content-center align-items-center">
            <div class="table-wrapper container-fluid">
                <div class="table-title">
                    <div class="row">
                        <div class="col-sm-8">
                            <h2><b>Productos</b></h2>
                        </div>
                        <div class="col-sm-12 text-end mb-3">

                            <button type="button" class="btn btn-warning" id="liveToastBtn"><i
                                    class="bi bi-file-earmark-plus-fill"></i>
                                Generar
                                reporte</button>
                            <button type="button" class="btn btn-info" data-bs-toggle="modal"
                                data-bs-target="#statsGeModal"><i
                                    class="bi bi-bar-chart-line-fill"></i> Ver
                                estadísticas</button>
                            <button type="button" class="btn btn-success add-new"><i class="bi bi-plus"></i>Añadir</button>

                        </div>
                    </div>
                </div>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Nombre Producto</th>
                            <th>Stock Min</th>
                            <th>Stock Max</th>
                            <th>Stock Actual</th>
                            <th>Precio</th>
                            <th>Proveedor</th>
                            <th>Categoría</th>
                            <th>Fecha Vencimiento</th>
                            <th>Estado</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>PEPSI</td>
                            <td>10</td>
                            <td>30</td>
                            <td>15</td>
                            <td>1000</td>
                            <td>PEPSI Colombia</td>
                            <td>Bedida en lata</td>
                            <td>30/10/2022</td>
                            <td>
                                <select name="estado">
                                    <option value="activo">Activo</option>
                                    <option value="inactivo">Inactivo</option>
                                </select>
                            </td>
                            <td>
                                <a class="add" title="Add" data-toggle="tooltip"><i
                                        class="bi bi-plus-square-fill text-primary"></i></a>
                                <a class="edit" title="Edit" data-toggle="tooltip"><i
                                        class="bi bi-pencil-fill text-warning"></i></a>
                                <a class="delete" data-toggle="tooltip"><i class="bi bi-trash-fill text-danger"></i></a>
                                <a class="text-info" title="Información producto" data-bs-toggle="modal"
                                    data-bs-target="#statsProModal" data-toggle="tooltip"><i
                                        class="bi bi-bar-chart-line-fill"></i></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal fade" id="statsProModal" tabindex="-1" aria-labelledby="statsProModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="statsProModalLabel">Estadísticas</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-xl-12 col-lg-12">
                                    <div class="panel mb-g">
                                        <div class="panel-heading">
                                            <h3>Estado del producto</h3>
                                        </div>
                                        <div class="panel-body">
                                            <div class="product-status">
                                                <div class="table-responsive">
                                                    <table class="table mb-0">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Vendidos</th>
                                                                <th scope="col">Ganancias</th>
                                                                <th scope="col">Disponibilidad</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>13</td>
                                                                <td>$13000</td>
                                                                <td><span class="text-success"><i
                                                                            class="bi bi-check-circle-fill"></i></span>
                                                                    Hay Stock</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="statsGeModal" tabindex="-1" aria-labelledby="statsGeModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="statsGeModalLabel">Estadísticas</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <canvas id="myChart" style="width:100%;max-width:700px"></canvas>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="toast-container position-fixed bottom-0 end-0 p-3">
                <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header bg-success">
                        <strong class="text-white me-auto">Reporte generado</strong>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
        </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
        const toastTrigger = document.getElementById('liveToastBtn')
        const toastLiveExample = document.getElementById('liveToast')
        if (toastTrigger) {
            toastTrigger.addEventListener('click', () => {
                const toast = new bootstrap.Toast(toastLiveExample)

                toast.show()
            })
        }
        const xValues = ["Enero", "Febrero", "Marzo", "Abril", "Mayo"];
        const yValues = [550000, 490000, 440000, 500000, 600000, 100000, 1000000];
        const barColors = ["blue", "blue", "blue", "blue", "blue"];

        new Chart("myChart", {
            type: "bar",
            data: {
                labels: xValues,
                datasets: [{
                    backgroundColor: barColors,
                    data: yValues
                }]
            },
            options: {
                legend: { display: false },
                title: {
                    display: true,
                    text: "Histórico Año 2022"
                }
            }
        });
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
            var actions = $("table td:last-child").html();
            // Append table with add row form on add new button click
            $(".add-new").click(function () {
                $(this).attr("disabled", "disabled");
                var index = $("table tbody tr:last-child").index();
                var row = '<tr>' +
                    '<td><input type="text" class="form-control" name="name" id="name"></td>' +
                    '<td><input type="text" class="form-control" name="department" id="department"></td>' +
                    '<td><input type="text" class="form-control" name="phone" id="phone"></td>' +
                    '<td><input type="text" class="form-control" name="name" id="name"></td>' +
                    '<td><input type="text" class="form-control" name="department" id="department"></td>' +
                    '<td><input type="text" class="form-control" name="phone" id="phone"></td>' +
                    '<td><input type="text" class="form-control" name="name" id="name"></td>' +
                    '<td><input type="text" class="form-control" name="department" id="department"></td>' +
                    '<td><input type="text" class="form-control" name="name" id="name"></td>' +
                    '<td><select name="estado"> <option value="activo">Activo</option><option value="inactivo">Inactivo</option></select></td>' +
                    '<td>' + actions + '</td>' +
                    '</tr>';
                $("table").append(row);
                $("table tbody tr").eq(index + 1).find(".add, .edit").toggle();
                $('[data-toggle="tooltip"]').tooltip();
            });
            // Add row on add button click
            $(document).on("click", ".add", function () {
                var empty = false;
                var input = $(this).parents("tr").find('input[type="text"]');
                input.each(function () {
                    if (!$(this).val()) {
                        $(this).addClass("error");
                        empty = true;
                    } else {
                        $(this).removeClass("error");
                    }
                });
                $(this).parents("tr").find(".error").first().focus();
                if (!empty) {
                    input.each(function () {
                        $(this).parent("td").html($(this).val());
                    });
                    $(this).parents("tr").find(".add, .edit").toggle();
                    $(".add-new").removeAttr("disabled");
                }
            });
            // Edit row on edit button click
            $(document).on("click", ".edit", function () {
                $(this).parents("tr").find("td:not(:last-child)").each(function () {
                    if ($(this).context.childElementCount != 0) {
                        $(this).html('<select name="estado"><option value="' + $(this).text() + '">Activo</option><option vvalue="' + $(this).text() + '">Inactivo</option></select>');
                    } else {
                        $(this).html('<input type="text" class="form-control" value="' + $(this)
                            .text() + '">');
                    }
                });
                $(this).parents("tr").find(".add, .edit").toggle();
                $(".add-new").attr("disabled", "disabled");
            });
            // Delete row on delete button click
            $(document).on("click", ".delete", function () {
                $(this).parents("tr").remove();
                $(".add-new").removeAttr("disabled");
            });
        });
    </script>
</body>

</html>